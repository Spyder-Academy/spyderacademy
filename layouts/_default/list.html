{{ define "main" }}
  <section class="section blog-list py-5">
    <div class="container">
      
        
      <div class="row justify-content-center">
        {{ if eq .Params.nickname "Stocks List" }}
        <div class="row justify-content-center">
          <div class="col-12 pb-5">
            {{ partial "shared/stock_ticker.html" }}
          </div>
          <div class="row">
            {{ partial "shared/tickers.html" }}
          </div>
          <div class="row pb-5">
            <div class="col-lg-4 col-12 mb-5">
              <div class="blog-content ">
                  <h2>Economic Calendar</h2>
              </div>
              {{ partial "shared/economic_calendar.html" }}
            </div>
            <div class="col-lg-8 col-12">
              <div class="blog-content ">
                <h2>Gamma Exposure</h2>
              </div>
              <div class="card shadow p-3 mb-5 w-100 d-none" id="spyGammaChart"></div>
            </div>
            <div class="col-12">
              <div class="container p-3 m-0">
                <div class="blog-content ">
                  <h2>Upcoming Earnings</h2>
                </div>
                <div class="row" id="earningsCalendar">
                  <div class="card shadow"> </div>
                </div>
                <div class="blog-content ">
                  <a href="/tools/earnings-calendar">See More Upcoming Earnings</a>
                </div>
                <script>
                  $(document).ready(function() {
                     userTrades = new Trades();
                     userTrades.fetchEarningsCalendar(2);
                  });
               </script>
              </div>
          </div>
        </div>
        {{ end }}

        <div class="col-12 col-xl-6">
          {{ with .Title }}
            <h1 class="fs-1 fw-bold text-center text-primary pb-3">{{ . }}</h1>
          {{ end }}
          {{ with .Params.description }}
            <p class="text-black-61 text-center pb-3">{{ . }}</p>
          {{ end }}
        </div>
      </div>

      {{ if in (slice "education" "tags") .Section }}
        {{ partial "shared/tags.html" }}
      {{ end }}

     
      {{ if ne .Section "education" }}
        <div class="row g-4 pb-5">
          {{ range (.Paginate .RegularPages).Pages.ByDate }}


          {{ if eq .Layout "stocks" }}
            {{ if ne .Params.disableListPage true }}

            <div class="col-6 col-md-3 col-lg-2">
              <a class="card shadow border-0 p-4 text-decoration-none h-100" style="border-radius: 15px;" href="{{ .Permalink }}">
                <div class="aspect-ratio-full">
                  <img class="" src="/images/logos/{{.Params.ticker}}.png" alt="{{ .Title }}" />
                </div>
                <div class="card-body text-center">
                  <h5 class="card-title fw-semibold">{{ .Params.ticker }}</h5>
                </div>
              </a>
            </div>
            {{ end }}
          {{ else }} 
            <div class="col-12 col-md-6 col-lg-4">
              <a class="card shadow border-0 p-4 text-decoration-none h-100" style="border-radius: 15px;" href="{{ .Permalink }}">
                <div class="aspect-ratio-full">
                      {{ with .Resources.GetMatch (printf "**/%s" "{cover.*}") }}
                          {{ with .Resize "1000x" }}
                              <img class="" src="{{ .RelPermalink }}" alt="{{ .Title }}" width="{{ .Width }}" height="{{ .Height }}">
                          {{ end }} 
                      {{ end }}
                </div>
                <div class="card-body">
                  <h5 class="card-title fw-semibold">{{ .Title }}</h5>
                  {{ if eq .Section "education" }}<p class="card-text text-danger">By {{ .Param "author" | plainify }}</p>{{ end }}
                  {{ if eq .Section "courses" }}<p class="card-text text-danger">{{ .Param "level" | plainify }}</p>{{ end }}
                  <p class="card-text text-black-61">{{ .Summary }}</p>
                </div>
              </a>
            </div>
          {{ end }}
        {{ end }}
      </div>
    {{ end }}

    <div class="row pb-5">
      {{ template "_internal/pagination.html" . }}
    </div>

    
    <div class="row pb-5">
      <div class="col-12 d-flex justify-content-center">
        <div class="blog-content fs-5 ">
          {{ .Content }}
        </div>
      </div>
    </div>    
    </div>

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script>
        $(document).ready(
          function() {
            userTrades = new Trades();
            userTrades.fetchGEXByStrike("SPY", "#spyGammaChart");
          }
        );
    </script>

  </section>
{{ end }}


