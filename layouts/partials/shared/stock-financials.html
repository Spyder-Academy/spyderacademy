{{ $symbol := .symbol }}
{{ $stocks := .Site.Data.stocks.stocks }}
{{ $profile := where $stocks "symbol" $symbol }}



<div class="container p-0 m-0">
  <div class="content-section row d-none stock_social_row">
      <div class="col-12 d-lg-block">
          <div class="card-body tweet-header bg-dark text-white justify-content-center">
              <h4 class="card-title fw-semibold text-uppercase">FINANCIALS</h4>
          </div>
      </div>
  </div>

  <div class="row pb-3 justify-content-evenly text-center tenq">
    <div class="col-4">
      <div class="card rounded  d-flex h-100">
        <div class="card-body">
            <div class="fs-1" id="financials_cagr">-</div>
            <div class="text-muted" title="Compund Annual Growth Rate">CAGR</div>
        </div>
      </div>
    </div>
    <div class="col-4">
      <div class="card rounded d-flex h-100">
        <div class="card-body">
          <div class="fs-1" id="financials_ltm_gross_margin">-</div>
          <div class="text-muted" title="Trailing 12 Months - Gross Margin">Gross Margin (TTM)</div>
        </div>
      </div>
    </div>
    <div class="col-4">
      <div class="card rounded d-flex  h-100">
        <div class="card-body">
          <div class="fs-1" id="financials_ltm_fcf_margin">-</div>
          <div class="text-muted" title="Trailing 12 Months - Free Cash Flow Margin">Free Cash Flow Net Margin (TTM)</div>
        </div>
      </div>
    </div>
  </div>

  <div class="row pb-3 text-center tenq">
    <div class="col-lg-6 col-12">
      <div class="card rounded">
        <div class="card-title p-3 fw-bold">
          QUARTERLY REVENUE
        </div>
        <div class="card-body">
          <div  id="revenueChart"></div>
        </div>
      </div>
    </div>
    <div class="col-lg-6 col-12">
      <div class="card rounded">
        <div class="card-title p-3 fw-bold">
          EARNINGS PER SHARE
        </div>
        <div class="card-body">
          <div  id="epsChart"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="row pb-3 text-center tenq">
    <div class="col-lg-12 col-12">
      <div class="card rounded">
        <div class="sankey_container card-body justify-content-center" style="width: 1200px; height: 600px; align-items: center; justify-content: center;">
            <div id="sankey_chart" class="d-lg-block d-sm-none" style="width: 100%; height: 600px"></div>
            <img id="sankey_image" class="d-lg-none d-sm-block" style="width: 100%"></img>
        </div>
      </div>
    </div>
  </div>

  <div class="row pb-3">
    <div class="col-12">
      <div class="card rounded">
        <div class="card-body">
          <div class="tradingview-financials-widget-container__widget"></div>
          <script type="application/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-financials.js" async>
            {
              "isTransparent": false,
              "largeChartUrl": "",
              "displayMode": "regular",
              "width": "100%",
              "height": "800",
              "colorTheme": "light",
              "symbol": "{{ $symbol }}",
              "locale": "en"
            }
          </script>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function() {
      tradePlanner = new TradePlanner();
      
      var ticker = {{ $symbol }};
      tradePlanner.fetchFinancials(ticker);


  });

</script>



